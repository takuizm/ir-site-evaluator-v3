# DOM判定: `details` テンプレートガイド

ScriptValidator が返す `details` 文字列をカテゴリ別に整理し、PASS/FAIL の書き分けと用語ブレを防ぐためのテンプレートをまとめる。

## 共通方針
- **PASS**: 「〜を検出」「〜を確認」「〜導線あり」など、実際に見つかった要素を肯定形で記述する。
- **FAIL**: 「〜を検出できず」「不足: 〜」のように不足内容を明示する。消極的表現（「要確認」など）は避ける。
- **複合条件**: 満たしている要素と不足要素が混在する場合は `"不足: 要素A・要素B"` 形式で列挙する。
- **並列条件**: `details` に複数情報を盛り込む場合は `' / '` で区切る（例: `グローバル検索導線あり / 日本語対応あり / 英語対応不明`）。

## カテゴリ別テンプレート

### 1. サイト内検索 UI（items 44 / 47 / 51 / 52）
| 観点 | PASS 例 | FAIL 例 |
|------|---------|---------|
| item 44 | `グローバル検索導線あり / 日本語対応あり / 英語対応あり` | `グローバル検索導線なし / 日本語対応不明 / 英語対応不明` |
| item 47 | `カテゴリ選択付き検索フォームを検出` | `カテゴリ選択付き検索フォームを検出できず` |
| item 51 | `HTML/PDFフィルタを検出` | `HTML/PDFフィルタを検出できず` |
| item 52 | `検索トップに統合報告書（統合報告書 2024）を検出` | `統合報告書が検索トップに表示されず` または `統合報告書の検索結果を検出できず` |

### 2. グラフ系（items 78 / 79 / 81 / 82 / 90 / 91）
- item 78: PASS `売上・利益推移グラフを検出` / FAIL `売上・利益推移グラフまたは期間情報を検出できず`
- item 79: PASS `グラフと説明文を検出` / FAIL `説明文付きグラフを確認できず`
- item 81: PASS `四半期別グラフを検出` / FAIL `四半期別グラフを検出できず`
- item 82: PASS `四半期グラフと説明文を検出` / FAIL `四半期グラフの説明を検出できず`
- item 90: PASS `チャートジェネレーターUIを検出` / FAIL `チャートジェネレーターUIを検出できず`
- item 91: PASS `B/S・P/L・C/S の HTML テーブルを検出` / FAIL `不足: B/S・P/L・C/S・HTMLテーブル` のように不足要素を列挙

### 3. カレンダー・言語切替（items 117 / 224）
- item 117: PASS `IRカレンダーの概要・詳細を検出` / FAIL `不足: カレンダー見出し・詳細予定`（不足分を列挙）
- item 224: PASS `日本語ページから英語ページへの直接リンクを検出` / FAIL `言語切替リンクはあるが同一ページへの遷移を確認できず` もしくは `英語への言語切替リンクを検出できず`

### 4. ダウンロード導線（items 106 / 107）
- item 106: PASS `四半期財務CSV/XLSリンクを検出 (financial-data-q4.csv)` / FAIL `四半期財務CSV/XLSリンクを検出できず`
- item 107: PASS `時系列財務CSV/XLSリンクを検出 (5year-financials.xlsx)` / FAIL `時系列財務CSV/XLSリンクを検出できず`

## 運用メモ
- ScriptValidator 側では `*_検出` / `*_未検出` の語尾で統一済み。新しい DOM 項目を追加する際もこの表に倣って命名する。
- FAIL 時に不足要素を列挙する場合は `・` 区切りで並べると CSV やレポート上で視認しやすい。
- LLM 判定と混在するレポートでも識別しやすいよう、PASS には必ず肯定文、FAIL には否定文を採用する。
